<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Tool Builder | TechVyro</title>

  <!-- üîí GLOBAL + AI + PREMIUM UI -->
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/ai.css">
  <link rel="stylesheet" href="../css/premium.css">

  <style>
    /* ===== PAGE LOADER (SAME UI) ===== */
    #pageLoader{
      position: fixed;
      inset: 0;
      background: #020617;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .spinner{
      width: 46px;
      height: 46px;
      border: 4px solid #334155;
      border-top: 4px solid #38bdf8;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin{
      to{ transform: rotate(360deg); }
    }

    /* ===== PAGE WRAPPER (NO UI CHANGE) ===== */
    .builder-wrap{
      max-width: 640px;
      margin: 80px auto;
      text-align: center;
    }

    h2{
      margin-bottom: 20px;
    }

    a.back{
      display: inline-block;
      margin-top: 20px;
    }
  </style>

```html  <script type="module" src="./js/auth-guard.js"></script>
</head>

<body>

<!-- PAGE LOADER -->
<div id="pageLoader">
  <div class="spinner"></div>
</div>

<div class="builder-wrap">

  <h2>AI Tool Builder</h2>

  <!-- üî• PREMIUM WRAPPER (UNCHANGED LOGIC) -->
  <div class="premium-only">

    <input id="toolName" type="text" placeholder="Tool Name">
    <br><br>

    <textarea id="toolDesc" placeholder="What should this AI tool do?" rows="5"></textarea>
    <br><br>

    <select id="toolPlan">
      <option>Free</option>
      <option>Pro</option>
      <option>Premium</option>
    </select>
    <br><br>

    <button type="button" class="premium-btn" id="buildBtn">
      Build Tool
    </button>

    <pre id="buildResult">Tool output will appear here...</pre>

  </div>

  <hr>

  <a href="dashboard.html" class="back">‚Üê Back to Dashboard</a>

</div>

<!-- ORIGINAL LOADER LOGIC (UNCHANGED) -->
<script>
  window.addEventListener("load", () => {
    document.getElementById("pageLoader").style.display = "none";
  });
</script>

<script>
  window.addEventListener("load", () => {
    document.body.classList.add("loaded");
  });
</script>

<!-- ================= AUTH SECURITY (UNCHANGED) ================= -->
<script type="module">
  import { auth } from "../js/firebase.js";

  auth.onAuthStateChanged(user => {
    if (!user) {
      location.href = "login.html";
    }
  });
</script>

<!-- PREMIUM GUARDS (UNCHANGED) -->
<script src="../js/auth-plan.js"></script>
<script src="../js/premium-guard.js"></script>

<!-- ================= DEMO LIMIT LOGIC (UNCHANGED) ================= -->
<script>
  const sessionUser = JSON.parse(localStorage.getItem("user"));
  const buildBtn = document.getElementById("buildBtn");
  const output = document.getElementById("buildResult");

  const TODAY = new Date().toDateString();
  let builderUsage = JSON.parse(localStorage.getItem("builder_usage")) || {};

  if (builderUsage.date !== TODAY) {
    builderUsage = { date: TODAY, count: 0 };
  }

  buildBtn.addEventListener("click", () => {
    if (!sessionUser) {
      location.href = "login.html";
      return;
    }

    if (!sessionUser.isPremium && builderUsage.count >= 1) {
      output.innerText =
        "‚ö†Ô∏è Demo limit reached. Upgrade to Premium to build unlimited tools.";
      return;
    }

    builderUsage.count++;
    localStorage.setItem("builder_usage", JSON.stringify(builderUsage));

    output.innerText =
      "üõ† Tool Builder (Demo)\n\n" +
      "Tool created successfully.\n" +
      "Builds today: " +
      builderUsage.count +
      (sessionUser.isPremium ? " (Unlimited Premium)" : " / 1");
  });
</script>

</body>
</html>
